<?phpclass Admin_Model_Caminhoes extends Zend_Db_Table {    protected $_name = 'caminhoes';    protected $_primary = 'id';    public function init() {        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');        $viewRenderer->init();        $this->view = $viewRenderer->view;    }    public function insert(array $data) {        if (!is_array($data))            return false;        $auth = Zend_Auth::getInstance();        $user = $auth->getIdentity();        $data['user'] = $user->id;        if (is_numeric($data['id'])) {            $this->update($data, "id = " . $data['id']);            return $data['id'];        }        unset($data['id']);        $info = $this->info();        $data_insert = array_intersect_key($data, $info['metadata']);        parent::insert($data_insert);    }    public function VerificaMotorista($motorista) {        $sql = $this->select()                ->setIntegrityCheck(false)                ->from(array('c' => $this->_name), array("*"))                ->where("c.motorista = ?", $motorista);        if ($result = $this->fetchRow($sql)) {            return $result->toArray();        } else {            return false;        }    }    public function Dados() {        $sql = $this->select();        if ($result = $this->fetchRow($sql)) {            return $result;        }    }    public function ListarCaminhoes($tipo = false, $proprio = false) {        $sql = $this->select()                ->where("ativo = ?", 1);        if ($tipo) {            $sql->where("tipo = ?", $tipo);        }        if ($proprio) {            $sql->where("proprio = ?", 1);        }         $sql->order("placa");        if ($caminhoes = $this->fetchAll($sql)) {            return $caminhoes->toArray();        } else {            return FALSE;        }    }    public function GetDados($id) {        $sql = $this->select()                ->where("id = ?", $id);        if ($data = $this->fetchRow($sql)) {            return $data->toArray();        }    }    public function GetCaminhao($Placa) {        $sql = $this->select()                ->where("placa = ?", $Placa);        if ($data = $this->fetchRow($sql)) {            return $data->id;        } else {            return FALSE;        }    }    public function update(array $data, $where) {        $info = $this->info();        $data_insert = array_intersect_key($data, $info['metadata']);        parent::update($data_insert, $where);    }    public function Lista() {        $sql = $this->select()                ->setIntegrityCheck(false)                ->from(array("c" => $this->_name))                ->order("c.id");        if ($result = $this->fetchAll($sql)) {            return $result->toArray();        }    }}