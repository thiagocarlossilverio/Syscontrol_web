$(function () {    var map;    var idInfoBoxAberto;    var infoBox = [];    var markers = [];    function initialize() {        var latlng = new google.maps.LatLng(-18.8800397, -47.05878999999999);        var options = {            zoom: 5,            center: latlng,            mapTypeId: google.maps.MapTypeId.ROADMAP        };        map = new google.maps.Map(document.getElementById("mapa"), options);    }    initialize();    function abrirInfoBox(id, marker) {        if (typeof (idInfoBoxAberto) == 'number' && typeof (infoBox[idInfoBoxAberto]) == 'object') {            infoBox[idInfoBoxAberto].close();        }        infoBox[id].open(map, marker);        idInfoBoxAberto = id;    }    function carregarPontos() {        $.getJSON('/admin/viagens/json-rotas/id/6', function (ponto) {            var latlngbounds = new google.maps.LatLngBounds();            console.log(ponto);            var marker = new google.maps.Marker({                position: new google.maps.LatLng(ponto.latitude_abertura, ponto.longitude_abertura),                title: "Ponto de Abertura da Viagem",                // icon: '/imagens/marcador.png'            });            var myOptions = {                content: "<p>" + ponto.origem + "</p>",                pixelOffset: new google.maps.Size(-150, 0)            };            infoBox[ponto.id] = new InfoBox(myOptions);            infoBox[ponto.id].marker = marker;            infoBox[ponto.id].listener = google.maps.event.addListener(marker, 'click', function (e) {                abrirInfoBox(ponto.id, marker);            });            markers.push(marker);            latlngbounds.extend(marker.position);            /**/            var marker = new google.maps.Marker({                position: new google.maps.LatLng(ponto.latitude_fechamento, ponto.longitude_fechamento),                title: "Ponto de Fechamento da Viagem",                // icon: '/imagens/marcador.png'            });            var myOptions = {                content: "<p>" + ponto.destino_final + "</p>",                pixelOffset: new google.maps.Size(-150, 0)            };            infoBox[ponto.id] = new InfoBox(myOptions);            infoBox[ponto.id].marker = marker;            infoBox[ponto.id].listener = google.maps.event.addListener(marker, 'click', function (e) {                abrirInfoBox(ponto.id, marker);            });            markers.push(marker);            latlngbounds.extend(marker.position);        });        var markerCluster = new MarkerClusterer(map, markers);        map.fitBounds(latlngbounds);    }    carregarPontos();});