$(function () {    if($('#id').val()!==''){       $(':radio').attr('disabled', 'disabled');     }            setInterval('Peso()', 1000);    $.getScript('/adm/default/js/lib/jquery.mask.min.js', function () {        $('#peso_tara, #peso_bruto, #peso_nota').mask('###.##0', {reverse: true, placeholder: "0.000"});    });    $('#caminhao-element').after('<i class="fa fa-plus-square-o fa-6x btincluir incluirCaminhao"></i>');    $('#categoria-element').after('<i class="fa fa-plus-square-o fa-6x btincluir incluirCategoria"></i>');    $.getScript('/adm/default/js/lib/mascaras.js', function () {        $.getScript('/adm/default/js/timepicker.js', function () {            $("#data_entrada, #data_saida").mask("99/99/9999 99:99");            $("#data_entrada, #data_saida").datetimepicker({                dateFormat: "dd/mm/yy",                dayNamesMin: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"],                monthNames: ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"]});        });    });    if ($('#peso_bruto').val() !== '' && $('#peso_bruto').val() > '0.00') {        $("#carregado-1").prop("checked", false);        $("#carregado-0").prop("checked", true);    } else {        $("#carregado-1").prop("checked", true);        $("#carregado-0").prop("checked", false);    }    if ($('#id').val() !== '') {        $('#data_entrada-element').hide();        $('#data_entrada-label').hide();        subCategorias($('#categoria').val());    } else {        $('#data_saida-element').hide();        $('#data_saida-label').hide();    }    if ($('input:checked').val() == '1') {        $('#peso_tara-element').hide();        $('#peso_tara-label').hide();        $('#peso_bruto-label').show();        $('#peso_bruto-element').show();        $('#peso_bruto').val($('#temp').val());           } else {        $('#peso_tara-element').show();        $('#peso_tara-label').show();        $('#peso_bruto-element').hide();        $('#peso_bruto-label').hide();        $('#peso_tara').val($('#temp').val());    }    $(':radio').click(function () {        if ($(this).val() == '1') {            $('#peso_tara-element').hide();            $('#peso_tara-label').hide();            $('#peso_bruto-label').show();            $('#peso_bruto-element').show();            $('#peso_bruto').val($('#temp').val());            if ($('#id').val() == '') {                $('#peso_tara').val('');            }        } else {            $('#peso_tara-element').show();            $('#peso_tara-label').show();            $('#peso_bruto-element').hide();            $('#peso_bruto-label').hide();            $('#peso_tara').val($('#temp').val());            if ($('#id').val() == '') {                $('#peso_bruto').val('');            }        }                });    if ($('#categoria :selected').text() == 'Carga Viva') {        $('#cabecas-label').show();        $('#cabecas-element').show();    } else if ($('#categoria :selected').text() == 'Matéria-Prima') {        $('#peso_nota-label').show();        $('#peso_nota-element').show();        $('#cabecas-label').hide();        $('#cabecas-element').hide();    } else {        $('#cabecas-label').hide();        $('#cabecas-element').hide();        $('#peso_nota-label').hide();        $('#peso_nota-element').hide();    }    $("#categoria").change(function () {        subCategorias($(this).val());        if ($('#categoria :selected').text() == 'Carga Viva') {            $('#cabecas-label').show();            $('#cabecas-element').show();        } else if ($('#categoria :selected').text() == 'Matéria-Prima') {            $('#peso_nota-label').show();            $('#peso_nota-element').show();            $('#cabecas-label').hide();            $('#cabecas-element').hide();        } else {            $('#cabecas-label').hide();            $('#cabecas-element').hide();            $('#peso_nota-label').hide();            $('#peso_nota-element').hide();        }    });    $(function () {        $('#cabecas').bind('keydown', soNums);    });    if ($('#nota_fiscal').val() == '') {        $("#caminhao, #nota_fiscal").blur(function () {            var caminhao = $('#caminhao').val();            var nota = $('#nota_fiscal').val();            if (caminhao !== '' && nota !== '') {                $.ajax({                    url: '/admin/cargas/ajax-verifica-nota',                    data: {                        placa: caminhao,                        nota: nota                    },                    type: 'POST'                }).done(function (data) {                    if (data == true) {                        msg('Atenção', 'Não é possível inserir o mesmo Nº de nota fiscal para o mesmo veículo!');                        $('input[type="submit"]').prop('disabled', true);                    } else {                        $('input[type="submit"]').prop('disabled', false);                    }                });            }        });        $("#caminhao").change(function () {            var caminhao = $('#caminhao').val();            var nota = $('#nota_fiscal').val();            if (caminhao !== '' && nota !== '') {                $.ajax({                    url: '/admin/cargas/ajax-verifica-nota',                    data: {                        placa: caminhao,                        nota: nota                    },                    type: 'POST'                }).done(function (data) {                    if (data == true) {                        msg('Atenção', 'Não é possível inserir o mesmo Nº de nota fiscal para o mesmo veículo!');                        $('input[type="submit"]').prop('disabled', true);                    } else {                        $('input[type="submit"]').prop('disabled', false);                    }                });            }        });    } else {        $('#nota_fiscal').prop('disabled', true);    }    $(document).on("click", ".incluirCaminhao", function () {        $.ajax({            url: '/admin/geral/ajax-incluir/param/2',            type: 'GET',            dataType: 'html'        }).done(function (data) {            $('.conteudo').html(data);            $('#myModal').modal('show');        });    });    $(document).on("click", ".incluirCategoria", function () {        $.ajax({            url: '/admin/geral/ajax-incluir/param/3',            type: 'GET',            dataType: 'html'        }).done(function (data) {            $('.conteudo').html(data);            $('#myModal').modal('show');        });    });});function msg(title, msg) {    Notification.requestPermission(function () {        var notification = new Notification(title, {            icon: '/adm/default/img/atencion.svg',            body: msg        });    });}function Peso() {    $.ajax({        url: '/admin/cargas/ajax-peso/',        type: 'POST'    }).done(function (data) {        if (data === 'erro') {            $('#temp').val('0.00');        } else {            $('#temp').val(data);                    }    });}function soNums(e) {    //teclas adicionais permitidas (tab,delete,backspace,setas direita e esquerda)    keyCodesPermitidos = new Array(8, 9, 37, 39, 46);    //numeros e 0 a 9 do teclado alfanumerico    for (x = 48; x <= 57; x++) {        keyCodesPermitidos.push(x);    }    //numeros e 0 a 9 do teclado numerico    for (x = 96; x <= 105; x++) {        keyCodesPermitidos.push(x);    }    //Pega a tecla digitada    keyCode = e.which;    //Verifica se a tecla digitada é permitida    if ($.inArray(keyCode, keyCodesPermitidos) != -1) {        return true;    }    return false;}function subCategorias($valor) {    // Limpo os Valores da Subcategoria    $("#subcategoria > option").remove();    // Se valor (da categoria) for Maior do que 0    if ($valor > 0) {        // Busco via JSON os dados da SUBCATEGORIA        $.getJSON('/admin/categorias/ajax-sub-categorias/categoria/' + $valor, function (data) {            if (data.length > 0) {                var itens = [];                $.each(data, function (key, val) {                    itens.push('<option value="' + data[key].id + '">' + data[key].nome + '</option>');                });                $("#subcategoria").append(itens.join('')).removeAttr('disabled'); // Adiciono as OPTIONS retornadas                $('#subcategoria-label').show();                $('#subcategoria-element').show();            } else {                $('#subcategoria-label').hide();                $('#subcategoria-element').hide();            }        });    }}function SelecionaSubCategoria(categoria) {    $.getJSON('/admin/categorias/ajax-sub/categoria/' + categoria, function (data) {        $("#subcategoria").removeAttr('disabled');        var html = "";        $(data).each(function (i, e) {            if ($("#sub").val() === e.id) {                var check = 'selected';            } else {                var check = '';            }            html += '<option value="' + e.id + '" ' + check + '>' + e.nome + '</option>';        });        //console.log(html);        $('#subcategoria').html(html);    });}